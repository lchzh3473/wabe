var e=Object.defineProperty,t=(t,i,r)=>(((t,i,r)=>{i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r})(t,"symbol"!=typeof i?i+"":i,r),r);var i=(e=>(e[e.LittleEndian=0]="LittleEndian",e[e.BigEndian=1]="BigEndian",e))(i||{});class r{constructor(e,i=0,r=e.byteLength-i){t(this,"buffer"),t(this,"length"),t(this,"_position"),this.buffer=new Uint8Array(e,i,r),this._position=0,this.length=r}get position(){return this._position}set position(e){this._position=e>=0?e:this.length-e}offset(e){return this._position=e,this}skip(e){this._position+=e}alignStream(e=4){const t=this._position%e;0!==t&&(this._position+=e-t)}readByte(){return this.buffer[this._position++]}readBytes(e){return this.buffer.subarray(this._position,this._position+=e)}read(e,t,i){e.set(this.readBytes(i),t)}}class s extends r{constructor(e,r=i.BigEndian){super(e.buffer,e.byteOffset,e.byteLength),t(this,"_stream"),t(this,"littleEndian"),this._stream=new DataView(e.buffer,e.byteOffset,e.byteLength),this.littleEndian=r===i.LittleEndian,this.endian=r}get endian(){return this.littleEndian?i.LittleEndian:i.BigEndian}set endian(e){this.littleEndian=e===i.LittleEndian}readBoolean(){return!!this.readBytes(1)[0]}readString(e,t="utf-8"){return new TextDecoder(t).decode(this.readBytes(e)).replace(/\0+$/,"")}readAlignedString(){const e=this.readString(this.readUint32());return this.alignStream(4),e}readStringToNull(e){const t=null!=e?e:this.length,{buffer:i}=this;let r=0;for(;0!==i[this.position+r]&&r++<t;);const s=i.subarray(this.position,this.position+r);return this.position+=r+1,new TextDecoder("utf-8").decode(s)}readUInt8Array(){const e=this.readUint32();return this.readBytes(e)}readInt32Array(){const e=this.readUint32(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=this.readInt32();return t}readInt16(){const e=this._stream.getInt16(this.position,this.littleEndian);return this.position+=2,e}readInt32(){const e=this._stream.getInt32(this.position,this.littleEndian);return this.position+=4,e}readInt64(){const e=this._stream.getBigInt64(this.position,this.littleEndian);return this.position+=8,e}readInt64n(){const e=this.readInt64();if(e>Number.MAX_SAFE_INTEGER)throw new Error("i64n: value is too large to be represented as a number");if(e<Number.MIN_SAFE_INTEGER)throw new Error("i64n: value is too small to be represented as a number");return Number(e)}readUint16(){const e=this._stream.getUint16(this.position,this.littleEndian);return this.position+=2,e}readUint32(){const e=this._stream.getUint32(this.position,this.littleEndian);return this.position+=4,e}readUint64(){const e=this._stream.getBigUint64(this.position,this.littleEndian);return this.position+=8,e}readUint64n(){const e=this.readUint64();if(e>Number.MAX_SAFE_INTEGER)throw new Error("u64n: value is too large to be represented as a number");if(e<Number.MIN_SAFE_INTEGER)throw new Error("u64n: value is too small to be represented as a number");return Number(e)}readSingle(){const e=this._stream.getFloat32(this.position,this.littleEndian);return this.position+=4,e}readDouble(){const e=this._stream.getFloat64(this.position,this.littleEndian);return this.position+=8,e}}var a=(e=>(e[e.AssetsFile=0]="AssetsFile",e[e.BundleFile=1]="BundleFile",e[e.WebFile=2]="WebFile",e[e.ResourceFile=3]="ResourceFile",e[e.GZipFile=4]="GZipFile",e[e.BrotliFile=5]="BrotliFile",e[e.ZipFile=6]="ZipFile",e))(a||{});class n extends s{constructor(e,r){super(r,i.BigEndian),t(this,"fullPath"),t(this,"fileName"),t(this,"fileType"),this.fullPath=e,this.fileName=e.split("/").pop(),this.fileType=this.checkFileType()}checkFileType(){const e=this.readStringToNull(20);switch(this.position=0,e){case"UnityWeb":case"UnityRaw":case"UnityArchive":case"UnityFS":return a.BundleFile;case"UnityWebData1.0":return a.WebFile;default:{let e=this.readString(2);return this.position=0,""===e?a.GZipFile:(this.position=32,e=this.readString(6),this.position=0,"brotli"===e?a.BrotliFile:this.isSerializedFile()?a.AssetsFile:(e=this.readString(4),this.position=0,"PK"===e||"PK\b"===e?a.ZipFile:a.ResourceFile))}}}isSerializedFile(){const e=this.length;if(this.length<20)return!1;this.readUint32();let t=this.readUint32();const i=this.readUint32();let r=this.readUint32();if(this.readByte(),this.readBytes(3),i>=22){if(e<48)return this.position=0,!1;this.readUint32(),t=Number(this.readInt64()),r=Number(this.readInt64())}return this.position=0,!(t!==e||r>t)}}function o(e,t){if(!self.lz4api)throw new Error("lz4api not loaded");const{lz4api:i}=self,r=e.length,s=i.getLinearMemoryOffset(),a=r+t,n=i.getLinearMemoryOffset()+a,o=i.memory.buffer.byteLength>>>16,l=n+65535>>>16;l>o&&i.memory.grow(l-o);const d=i.memory.buffer;new Uint8Array(d,s,r).set(e);const h=i.lz4BlockDecode(s,r,s+r);if(0===h)throw new Error("lz4 decompression error: size not correct");return new Uint8Array(d.slice(s+r,s+r+h))}class l{constructor(){t(this,"path"),t(this,"fileName"),t(this,"stream")}}class d{constructor(){t(this,"signature"),t(this,"version"),t(this,"unityVersion"),t(this,"unityRevision"),t(this,"size"),t(this,"compressedBlocksInfoSize"),t(this,"uncompressedBlocksInfoSize"),t(this,"flags")}}class h{constructor(){t(this,"compressedSize"),t(this,"uncompressedSize"),t(this,"flags")}}class c{constructor(){t(this,"offset"),t(this,"size"),t(this,"flags"),t(this,"path")}}class m{constructor(e){t(this,"m_Header"),t(this,"m_BlocksInfo"),t(this,"m_DirectoryInfo"),t(this,"fileList"),this.fileList=[],this.m_BlocksInfo=[],this.m_DirectoryInfo=[],this.m_Header=new d,this.m_Header.signature=e.readStringToNull(),this.m_Header.version=e.readUint32(),this.m_Header.unityVersion=e.readStringToNull(),this.m_Header.unityRevision=e.readStringToNull();const i=()=>{this.readHeader(e),this.readBlocksInfoAndDirectory(e);const t=this.createBlocksStream(e.fullPath);this.readBlocks(e,t),this.readFiles(t,e.fullPath),console.log(this.fileList)},r=()=>{6===this.m_Header.version&&i(),this.readHeaderAndBlockInfo(e);const t=this.createBlocksStream(e.fullPath);this.readBlocksAndDirectory(e,t),this.readFiles(t,e.fullPath)};switch(this.m_Header.signature){case"UnityArchive":default:throw new Error("not supported");case"UnityWeb":case"UnityRaw":r();break;case"UnityFS":i()}}readHeaderAndBlockInfo(e){this.m_Header.version>=4&&(e.readBytes(16),e.readUint32()),e.readUint32(),this.m_Header.size=e.readUint32(),e.readUint32();const t=e.readInt32();this.m_BlocksInfo=[new h];for(let i=0;i<t;i++){const r=new h;r.compressedSize=e.readUint32(),r.uncompressedSize=e.readUint32(),i===t-1&&(this.m_BlocksInfo[0]=r)}this.m_Header.version>=2&&e.readUint32(),this.m_Header.version>=3&&e.readUint32(),e.position=this.m_Header.size}readHeader(e){this.m_Header.size=e.readInt64n(),this.m_Header.compressedBlocksInfoSize=e.readUint32(),this.m_Header.uncompressedBlocksInfoSize=e.readUint32(),this.m_Header.flags=e.readUint32(),"UnityFS"!==this.m_Header.signature&&e.readByte()}createBlocksStream(e){const t=this.m_BlocksInfo.reduce(((e,t)=>e+t.uncompressedSize),0);return new Uint8Array(t)}readBlocksAndDirectory(e,t){const i="UnityWeb"===this.m_Header.signature;for(const r of this.m_BlocksInfo){const s=e.readBytes(r.compressedSize);if(i)throw new Error("sorry, dont support UnityWeb compress");s.set(t,0)}const r=new s(t),a=r.readInt32();this.m_DirectoryInfo=[];for(let e=0;e<a;e++){const t=new c;t.path=r.readStringToNull(),t.offset=r.readUint32(),t.size=r.readUint32(),this.m_DirectoryInfo[e]=t}}readFiles(e,t){this.fileList=[];for(const i of this.m_DirectoryInfo){const r=new l;r.path=i.path,r.fileName=i.path.split("/").pop(),console.log("readFiles:",t,i.size>=2147483647),r.stream=e.subarray(i.offset,i.offset+i.size),this.fileList.push(r)}}readBlocksInfoAndDirectory(e){let t=new Uint8Array;if(this.m_Header.version>=7&&e.alignStream(16),128&this.m_Header.flags){const{position:i}=e;e.position=e.length-this.m_Header.compressedBlocksInfoSize,t=e.readBytes(this.m_Header.compressedBlocksInfoSize),e.position=i}else t=e.readBytes(this.m_Header.compressedBlocksInfoSize);let i=new Uint8Array;const r=this.m_Header.uncompressedBlocksInfoSize,a=63&this.m_Header.flags;switch(a){case 0:i=t;break;case 1:throw new Error("sorry, dont support LZMA compress");case 2:case 3:i=o(t,r);break;default:throw new Error(`Unsupported compression type ${a}`)}const n=new s(i);n.readBytes(16);const l=n.readInt32();this.m_BlocksInfo=[];for(let e=0;e<l;e++){const t=new h;t.uncompressedSize=n.readUint32(),t.compressedSize=n.readUint32(),t.flags=n.readUint16(),this.m_BlocksInfo[e]=t}const d=n.readInt32();this.m_DirectoryInfo=[];for(let e=0;e<d;e++){const t=new c;t.offset=n.readInt64n(),t.size=n.readInt64n(),t.flags=n.readUint32(),t.path=n.readStringToNull(),this.m_DirectoryInfo[e]=t}512&this.m_Header.flags&&e.alignStream(16)}readBlocks(e,t){let i=0;for(const r of this.m_BlocksInfo){const s=63&r.flags;switch(s){case 0:t.set(e.readBytes(r.uncompressedSize),i),i+=r.uncompressedSize;break;case 1:throw new Error("sorry, dont support LZMA compress");case 2:case 3:t.set(o(e.readBytes(r.compressedSize),r.uncompressedSize),i),i+=r.uncompressedSize;break;default:throw new Error(`Unsupported compression type ${s}`)}}}}var A=(e=>(e[e.AABB=0]="AABB",e[e.AnimationClip=5]="AnimationClip",e[e.AnimationCurve=19]="AnimationCurve",e[e.AnimationState=34]="AnimationState",e[e.Array=49]="Array",e[e.Base=55]="Base",e[e.BitField=60]="BitField",e[e.bitset=69]="bitset",e[e.bool=76]="bool",e[e.char=81]="char",e[e.ColorRGBA=86]="ColorRGBA",e[e.Component=96]="Component",e[e.data=106]="data",e[e.deque=111]="deque",e[e.double=117]="double",e[e.dynamic_array=124]="dynamic_array",e[e.FastPropertyName=138]="FastPropertyName",e[e.first=155]="first",e[e.float=161]="float",e[e.Font=167]="Font",e[e.GameObject=172]="GameObject",e[e["Generic Mono"]=183]="Generic Mono",e[e.GradientNEW=196]="GradientNEW",e[e.GUID=208]="GUID",e[e.GUIStyle=213]="GUIStyle",e[e.int=222]="int",e[e.list=226]="list",e[e["long long"]=231]="long long",e[e.map=241]="map",e[e.Matrix4x4f=245]="Matrix4x4f",e[e.MdFour=256]="MdFour",e[e.MonoBehaviour=263]="MonoBehaviour",e[e.MonoScript=277]="MonoScript",e[e.m_ByteSize=288]="m_ByteSize",e[e.m_Curve=299]="m_Curve",e[e.m_EditorClassIdentifier=307]="m_EditorClassIdentifier",e[e.m_EditorHideFlags=331]="m_EditorHideFlags",e[e.m_Enabled=349]="m_Enabled",e[e.m_ExtensionPtr=359]="m_ExtensionPtr",e[e.m_GameObject=374]="m_GameObject",e[e.m_Index=387]="m_Index",e[e.m_IsArray=395]="m_IsArray",e[e.m_IsStatic=405]="m_IsStatic",e[e.m_MetaFlag=416]="m_MetaFlag",e[e.m_Name=427]="m_Name",e[e.m_ObjectHideFlags=434]="m_ObjectHideFlags",e[e.m_PrefabInternal=452]="m_PrefabInternal",e[e.m_PrefabParentObject=469]="m_PrefabParentObject",e[e.m_Script=490]="m_Script",e[e.m_StaticEditorFlags=499]="m_StaticEditorFlags",e[e.m_Type=519]="m_Type",e[e.m_Version=526]="m_Version",e[e.Object=536]="Object",e[e.pair=543]="pair",e[e["PPtr<Component>"]=548]="PPtr<Component>",e[e["PPtr<GameObject>"]=564]="PPtr<GameObject>",e[e["PPtr<Material>"]=581]="PPtr<Material>",e[e["PPtr<MonoBehaviour>"]=596]="PPtr<MonoBehaviour>",e[e["PPtr<MonoScript>"]=616]="PPtr<MonoScript>",e[e["PPtr<Object>"]=633]="PPtr<Object>",e[e["PPtr<Prefab>"]=646]="PPtr<Prefab>",e[e["PPtr<Sprite>"]=659]="PPtr<Sprite>",e[e["PPtr<TextAsset>"]=672]="PPtr<TextAsset>",e[e["PPtr<Texture>"]=688]="PPtr<Texture>",e[e["PPtr<Texture2D>"]=702]="PPtr<Texture2D>",e[e["PPtr<Transform>"]=718]="PPtr<Transform>",e[e.Prefab=734]="Prefab",e[e.Quaternionf=741]="Quaternionf",e[e.Rectf=753]="Rectf",e[e.RectInt=759]="RectInt",e[e.RectOffset=767]="RectOffset",e[e.second=778]="second",e[e.set=785]="set",e[e.short=789]="short",e[e.size=795]="size",e[e.SInt16=800]="SInt16",e[e.SInt32=807]="SInt32",e[e.SInt64=814]="SInt64",e[e.SInt8=821]="SInt8",e[e.staticvector=827]="staticvector",e[e.string=840]="string",e[e.TextAsset=847]="TextAsset",e[e.TextMesh=857]="TextMesh",e[e.Texture=866]="Texture",e[e.Texture2D=874]="Texture2D",e[e.Transform=884]="Transform",e[e.TypelessData=894]="TypelessData",e[e.UInt16=907]="UInt16",e[e.UInt32=914]="UInt32",e[e.UInt64=921]="UInt64",e[e.UInt8=928]="UInt8",e[e["unsigned int"]=934]="unsigned int",e[e["unsigned long long"]=947]="unsigned long long",e[e["unsigned short"]=966]="unsigned short",e[e.vector=981]="vector",e[e.Vector2f=988]="Vector2f",e[e.Vector3f=997]="Vector3f",e[e.Vector4f=1006]="Vector4f",e[e.m_ScriptingClassIdentifier=1015]="m_ScriptingClassIdentifier",e[e.Gradient=1042]="Gradient",e[e["Type*"]=1051]="Type*",e[e.int2_storage=1057]="int2_storage",e[e.int3_storage=1070]="int3_storage",e[e.BoundsInt=1083]="BoundsInt",e[e.m_CorrespondingSourceObject=1093]="m_CorrespondingSourceObject",e[e.m_PrefabInstance=1121]="m_PrefabInstance",e[e.m_PrefabAsset=1138]="m_PrefabAsset",e[e.FileSize=1152]="FileSize",e[e.Hash128=1161]="Hash128",e))(A||{});class p{constructor(e){t(this,"buildType"),this.buildType=e}isAlpha(){return"a"===this.buildType}isPatch(){return"p"===this.buildType}}class u{constructor(){t(this,"m_MetadataSize"),t(this,"m_FileSize"),t(this,"m_Version"),t(this,"m_DataOffset"),t(this,"m_Endianess"),t(this,"m_Reserved")}}var f=(e=>(e[e.NoTarget=-2]="NoTarget",e[e.AnyPlayer=-1]="AnyPlayer",e[e.ValidPlayer=1]="ValidPlayer",e[e.StandaloneOSX=2]="StandaloneOSX",e[e.StandaloneOSXPPC=3]="StandaloneOSXPPC",e[e.StandaloneOSXIntel=4]="StandaloneOSXIntel",e[e.StandaloneWindows=5]="StandaloneWindows",e[e.WebPlayer=6]="WebPlayer",e[e.WebPlayerStreamed=7]="WebPlayerStreamed",e[e.Wii=8]="Wii",e[e.iOS=9]="iOS",e[e.PS3=10]="PS3",e[e.XBOX360=11]="XBOX360",e[e.Broadcom=12]="Broadcom",e[e.Android=13]="Android",e[e.StandaloneGLESEmu=14]="StandaloneGLESEmu",e[e.StandaloneGLES20Emu=15]="StandaloneGLES20Emu",e[e.NaCl=16]="NaCl",e[e.StandaloneLinux=17]="StandaloneLinux",e[e.FlashPlayer=18]="FlashPlayer",e[e.StandaloneWindows64=19]="StandaloneWindows64",e[e.WebGL=20]="WebGL",e[e.WSAPlayer=21]="WSAPlayer",e[e.StandaloneLinux64=24]="StandaloneLinux64",e[e.StandaloneLinuxUniversal=25]="StandaloneLinuxUniversal",e[e.WP8Player=26]="WP8Player",e[e.StandaloneOSXIntel64=27]="StandaloneOSXIntel64",e[e.BlackBerry=28]="BlackBerry",e[e.Tizen=29]="Tizen",e[e.PSP2=30]="PSP2",e[e.PS4=31]="PS4",e[e.PSM=32]="PSM",e[e.XboxOne=33]="XboxOne",e[e.SamsungTV=34]="SamsungTV",e[e.N3DS=35]="N3DS",e[e.WiiU=36]="WiiU",e[e.tvOS=37]="tvOS",e[e.Switch=38]="Switch",e[e.Lumin=39]="Lumin",e[e.Stadia=40]="Stadia",e[e.CloudRendering=41]="CloudRendering",e[e.GameCoreXboxSeries=42]="GameCoreXboxSeries",e[e.GameCoreXboxOne=43]="GameCoreXboxOne",e[e.PS5=44]="PS5",e[e.EmbeddedLinux=45]="EmbeddedLinux",e[e.QNX=46]="QNX",e[e.UnknownPlatform=9999]="UnknownPlatform",e))(f||{}),g=(e=>(e[e.Unsupported=1]="Unsupported",e[e.Unknown_2=2]="Unknown_2",e[e.Unknown_3=3]="Unknown_3",e[e.Unknown_5=5]="Unknown_5",e[e.Unknown_6=6]="Unknown_6",e[e.Unknown_7=7]="Unknown_7",e[e.Unknown_8=8]="Unknown_8",e[e.Unknown_9=9]="Unknown_9",e[e.Unknown_10=10]="Unknown_10",e[e.HasScriptTypeIndex=11]="HasScriptTypeIndex",e[e.Unknown_12=12]="Unknown_12",e[e.HasTypeTreeHashes=13]="HasTypeTreeHashes",e[e.Unknown_14=14]="Unknown_14",e[e.SupportsStrippedObject=15]="SupportsStrippedObject",e[e.RefactoredClassId=16]="RefactoredClassId",e[e.RefactorTypeData=17]="RefactorTypeData",e[e.RefactorShareableTypeTreeData=18]="RefactorShareableTypeTreeData",e[e.TypeTreeNodeWithTypeFlags=19]="TypeTreeNodeWithTypeFlags",e[e.SupportsRefObject=20]="SupportsRefObject",e[e.StoresTypeDependencies=21]="StoresTypeDependencies",e[e.LargeFilesSupport=22]="LargeFilesSupport",e))(g||{});class _{constructor(e,i,r,s){t(this,"m_Type"),t(this,"m_Name"),t(this,"m_ByteSize"),t(this,"m_Index"),t(this,"m_TypeFlags"),t(this,"m_Version"),t(this,"m_MetaFlag"),t(this,"m_Level"),t(this,"m_TypeStrOffset"),t(this,"m_NameStrOffset"),t(this,"m_RefTypeHash"),void 0!==e&&(this.m_Type=e,this.m_Name=i,this.m_Level=r,this.m_MetaFlag=s?16384:0)}}class S{constructor(){t(this,"classID"),t(this,"m_IsStrippedType"),t(this,"m_ScriptTypeIndex",-1),t(this,"m_Type"),t(this,"m_ScriptID"),t(this,"m_OldTypeHash"),t(this,"m_TypeDependencies"),t(this,"m_KlassName"),t(this,"m_NameSpace"),t(this,"m_AsmName")}}class I{constructor(){t(this,"m_Nodes"),t(this,"m_StringBuffer")}}class y{constructor(){t(this,"localSerializedFileIndex"),t(this,"localIdentifierInFile")}}class T{constructor(){t(this,"guid"),t(this,"type"),t(this,"pathName"),t(this,"fileName")}}class B{constructor(){t(this,"byteStart"),t(this,"byteSize"),t(this,"typeID"),t(this,"classID"),t(this,"isDestroyed"),t(this,"stripped"),t(this,"m_PathID"),t(this,"serializedType")}}class C{constructor(e,r){t(this,"assetsManager"),t(this,"reader"),t(this,"fullName"),t(this,"originalPath"),t(this,"fileName"),t(this,"version",[0,0,0,0]),t(this,"buildType"),t(this,"objects"),t(this,"objectsDic"),t(this,"header"),t(this,"m_FileEndianess"),t(this,"unityVersion","2.5.0f5"),t(this,"m_TargetPlatform",f.UnknownPlatform),t(this,"m_EnableTypeTree",!0),t(this,"m_Types"),t(this,"bigIDEnabled",0),t(this,"m_Objects"),t(this,"m_ScriptTypes"),t(this,"m_Externals"),t(this,"m_RefTypes"),t(this,"userInformation"),this.assetsManager=r,this.reader=e,this.fullName=e.fullPath,this.fileName=e.fileName,this.header=new u,this.header.m_MetadataSize=e.readUint32(),this.header.m_FileSize=e.readUint32(),this.header.m_Version=e.readUint32(),this.header.m_DataOffset=e.readUint32(),this.header.m_Version>=g.Unknown_9?(this.header.m_Endianess=e.readByte(),this.header.m_Reserved=e.readBytes(3),this.m_FileEndianess=this.header.m_Endianess):(e.position=this.header.m_FileSize-this.header.m_MetadataSize,this.m_FileEndianess=e.readByte()),this.header.m_Version>=g.LargeFilesSupport&&(this.header.m_MetadataSize=e.readUint32(),this.header.m_FileSize=e.readUint64n(),this.header.m_DataOffset=e.readUint64n(),e.readInt64()),0===this.m_FileEndianess&&(e.endian=i.LittleEndian),this.header.m_Version>=g.Unknown_7&&(this.unityVersion=e.readStringToNull(),this.setVersion(this.unityVersion)),this.header.m_Version>=g.Unknown_8&&(this.m_TargetPlatform=e.readInt32(),void 0===f[this.m_TargetPlatform]&&(console.warn(`Unknown BuildTarget: ${this.m_TargetPlatform}`),this.m_TargetPlatform=f.UnknownPlatform)),this.header.m_Version>=g.HasTypeTreeHashes&&(this.m_EnableTypeTree=e.readBoolean());const s=e.readInt32();this.m_Types=[];for(let e=0;e<s;e++)this.m_Types.push(this.readSerializedType(!1));this.header.m_Version>=g.Unknown_7&&this.header.m_Version<g.Unknown_14&&(this.bigIDEnabled=e.readInt32());const a=e.readInt32();this.m_Objects=[],this.objects=[],this.objectsDic={};for(let t=0;t<a;t++){const t=new B;if(0!==this.bigIDEnabled?t.m_PathID=e.readInt64():this.header.m_Version<g.Unknown_14?t.m_PathID=BigInt(e.readInt32()):(e.alignStream(4),t.m_PathID=e.readInt64()),this.header.m_Version>=g.LargeFilesSupport?t.byteStart=e.readInt64n():t.byteStart=e.readUint32(),t.byteStart+=this.header.m_DataOffset,t.byteSize=e.readUint32(),t.typeID=e.readInt32(),this.header.m_Version<g.RefactoredClassId)t.classID=e.readUint16(),t.serializedType=this.m_Types.find((e=>e.classID===t.typeID));else{const e=this.m_Types[t.typeID];t.serializedType=e,t.classID=e.classID}if(this.header.m_Version<g.HasScriptTypeIndex&&(t.isDestroyed=e.readUint16()),this.header.m_Version>=g.HasScriptTypeIndex&&this.header.m_Version<g.RefactorTypeData){const i=e.readInt16();null!=t.serializedType&&(t.serializedType.m_ScriptTypeIndex=i)}(this.header.m_Version===g.SupportsStrippedObject||this.header.m_Version===g.RefactoredClassId)&&(t.stripped=e.readByte()),this.m_Objects.push(t)}if(this.header.m_Version>=g.HasScriptTypeIndex){const t=e.readInt32();this.m_ScriptTypes=[];for(let i=0;i<t;i++){const t=new y;t.localSerializedFileIndex=e.readInt32(),this.header.m_Version<g.Unknown_14?t.localIdentifierInFile=BigInt(e.readInt32()):(e.alignStream(),t.localIdentifierInFile=e.readInt64()),this.m_ScriptTypes.push(t)}}const n=e.readInt32();this.m_Externals=[];for(let t=0;t<n;t++){const t=new T;this.header.m_Version>=g.Unknown_6&&e.readStringToNull(),this.header.m_Version>=g.Unknown_5&&(t.guid=e.readBytes(16),t.type=e.readInt32()),t.pathName=e.readStringToNull(),t.fileName=t.pathName.split("/").pop(),this.m_Externals.push(t)}if(this.header.m_Version>=g.SupportsRefObject){const t=e.readInt32();this.m_RefTypes=[];for(let e=0;e<t;e++)this.m_RefTypes.push(this.readSerializedType(!0))}this.header.m_Version>=g.Unknown_5&&(this.userInformation=e.readStringToNull())}setVersion(e){if("0.0.0"!==e){this.unityVersion=e;const t=e.replace(/\d/g,"").split(".").filter((e=>""!==e));this.buildType=new p(t[0]);const i=e.replace(/\D/g,".").split(".").filter((e=>""!==e));this.version=i.map((e=>parseInt(e)))}}readSerializedType(e){const{reader:t}=this,i=new S;return i.classID=t.readInt32(),this.header.m_Version>=g.RefactoredClassId&&(i.m_IsStrippedType=t.readBoolean()),this.header.m_Version>=g.RefactorTypeData&&(i.m_ScriptTypeIndex=t.readUint16()),this.header.m_Version>=g.HasTypeTreeHashes&&((this.header.m_Version<g.RefactoredClassId&&i.classID<0||this.header.m_Version>=g.RefactoredClassId&&114===i.classID)&&(i.m_ScriptID=t.readBytes(16)),i.m_OldTypeHash=t.readBytes(16)),this.m_EnableTypeTree&&(i.m_Type=new I,i.m_Type.m_Nodes=[],this.header.m_Version>=g.Unknown_12||this.header.m_Version===g.Unknown_10?this.typeTreeBlobRead(i.m_Type):this.readTypeTree(i.m_Type),this.header.m_Version>=g.StoresTypeDependencies&&(e?(i.m_KlassName=t.readStringToNull(),i.m_NameSpace=t.readStringToNull(),i.m_AsmName=t.readStringToNull()):i.m_TypeDependencies=t.readInt32Array())),i}readTypeTree(e,t=0){const i=new _;e.m_Nodes.push(i),i.m_Level=t,i.m_Type=this.reader.readStringToNull(),i.m_Name=this.reader.readStringToNull(),i.m_ByteSize=this.reader.readInt32(),this.header.m_Version===g.Unknown_2&&this.reader.skip(4),this.header.m_Version===g.Unknown_3&&(i.m_Index=this.reader.readInt32()),i.m_TypeFlags=this.reader.readInt32(),i.m_Version=this.reader.readInt32(),this.header.m_Version!==g.Unknown_3&&(i.m_MetaFlag=this.reader.readInt32());const r=this.reader.readInt32();for(let i=0;i<r;i++)this.readTypeTree(e,t+1)}typeTreeBlobRead(e){const{reader:t}=this,i=t.readInt32(),r=t.readInt32();for(let r=0;r<i;r++){const i=new _;e.m_Nodes.push(i),i.m_Version=t.readUint16(),i.m_Level=t.readByte(),i.m_TypeFlags=t.readByte(),i.m_TypeStrOffset=t.readUint32(),i.m_NameStrOffset=t.readUint32(),i.m_ByteSize=t.readInt32(),i.m_Index=t.readInt32(),i.m_MetaFlag=t.readInt32(),this.header.m_Version>=g.TypeTreeNodeWithTypeFlags&&(i.m_RefTypeHash=t.readUint64n())}e.m_StringBuffer=t.readBytes(r);const a=new s(e.m_StringBuffer),n=(e,t)=>{if(0==(2147483648&t))return e.position=t,e.readStringToNull();const i=2147483647&t;return A[i]||i.toString()};for(const t of e.m_Nodes)t.m_Type=n(a,t.m_TypeStrOffset),t.m_Name=n(a,t.m_NameStrOffset)}addObject(e){this.objects.push(e),this.objectsDic[e.m_PathID.toString()]=e}}var b=(e=>(e[e.UnknownType=-1]="UnknownType",e[e.Object=0]="Object",e[e.GameObject=1]="GameObject",e[e.Component=2]="Component",e[e.LevelGameManager=3]="LevelGameManager",e[e.Transform=4]="Transform",e[e.TimeManager=5]="TimeManager",e[e.GlobalGameManager=6]="GlobalGameManager",e[e.Behaviour=8]="Behaviour",e[e.GameManager=9]="GameManager",e[e.AudioManager=11]="AudioManager",e[e.ParticleAnimator=12]="ParticleAnimator",e[e.InputManager=13]="InputManager",e[e.EllipsoidParticleEmitter=15]="EllipsoidParticleEmitter",e[e.Pipeline=17]="Pipeline",e[e.EditorExtension=18]="EditorExtension",e[e.Physics2DSettings=19]="Physics2DSettings",e[e.Camera=20]="Camera",e[e.Material=21]="Material",e[e.MeshRenderer=23]="MeshRenderer",e[e.Renderer=25]="Renderer",e[e.ParticleRenderer=26]="ParticleRenderer",e[e.Texture=27]="Texture",e[e.Texture2D=28]="Texture2D",e[e.OcclusionCullingSettings=29]="OcclusionCullingSettings",e[e.GraphicsSettings=30]="GraphicsSettings",e[e.MeshFilter=33]="MeshFilter",e[e.OcclusionPortal=41]="OcclusionPortal",e[e.Mesh=43]="Mesh",e[e.Skybox=45]="Skybox",e[e.QualitySettings=47]="QualitySettings",e[e.Shader=48]="Shader",e[e.TextAsset=49]="TextAsset",e[e.Rigidbody2D=50]="Rigidbody2D",e[e.Physics2DManager=51]="Physics2DManager",e[e.Collider2D=53]="Collider2D",e[e.Rigidbody=54]="Rigidbody",e[e.PhysicsManager=55]="PhysicsManager",e[e.Collider=56]="Collider",e[e.Joint=57]="Joint",e[e.CircleCollider2D=58]="CircleCollider2D",e[e.HingeJoint=59]="HingeJoint",e[e.PolygonCollider2D=60]="PolygonCollider2D",e[e.BoxCollider2D=61]="BoxCollider2D",e[e.PhysicsMaterial2D=62]="PhysicsMaterial2D",e[e.MeshCollider=64]="MeshCollider",e[e.BoxCollider=65]="BoxCollider",e[e.CompositeCollider2D=66]="CompositeCollider2D",e[e.EdgeCollider2D=68]="EdgeCollider2D",e[e.CapsuleCollider2D=70]="CapsuleCollider2D",e[e.ComputeShader=72]="ComputeShader",e[e.AnimationClip=74]="AnimationClip",e[e.ConstantForce=75]="ConstantForce",e[e.WorldParticleCollider=76]="WorldParticleCollider",e[e.TagManager=78]="TagManager",e[e.AudioListener=81]="AudioListener",e[e.AudioSource=82]="AudioSource",e[e.AudioClip=83]="AudioClip",e[e.RenderTexture=84]="RenderTexture",e[e.CustomRenderTexture=86]="CustomRenderTexture",e[e.MeshParticleEmitter=87]="MeshParticleEmitter",e[e.ParticleEmitter=88]="ParticleEmitter",e[e.Cubemap=89]="Cubemap",e[e.Avatar=90]="Avatar",e[e.AnimatorController=91]="AnimatorController",e[e.GUILayer=92]="GUILayer",e[e.RuntimeAnimatorController=93]="RuntimeAnimatorController",e[e.ScriptMapper=94]="ScriptMapper",e[e.Animator=95]="Animator",e[e.TrailRenderer=96]="TrailRenderer",e[e.DelayedCallManager=98]="DelayedCallManager",e[e.TextMesh=102]="TextMesh",e[e.RenderSettings=104]="RenderSettings",e[e.Light=108]="Light",e[e.CGProgram=109]="CGProgram",e[e.BaseAnimationTrack=110]="BaseAnimationTrack",e[e.Animation=111]="Animation",e[e.MonoBehaviour=114]="MonoBehaviour",e[e.MonoScript=115]="MonoScript",e[e.MonoManager=116]="MonoManager",e[e.Texture3D=117]="Texture3D",e[e.NewAnimationTrack=118]="NewAnimationTrack",e[e.Projector=119]="Projector",e[e.LineRenderer=120]="LineRenderer",e[e.Flare=121]="Flare",e[e.Halo=122]="Halo",e[e.LensFlare=123]="LensFlare",e[e.FlareLayer=124]="FlareLayer",e[e.HaloLayer=125]="HaloLayer",e[e.NavMeshAreas=126]="NavMeshAreas",e[e.NavMeshProjectSettings=126]="NavMeshProjectSettings",e[e.HaloManager=127]="HaloManager",e[e.Font=128]="Font",e[e.PlayerSettings=129]="PlayerSettings",e[e.NamedObject=130]="NamedObject",e[e.GUITexture=131]="GUITexture",e[e.GUIText=132]="GUIText",e[e.GUIElement=133]="GUIElement",e[e.PhysicMaterial=134]="PhysicMaterial",e[e.SphereCollider=135]="SphereCollider",e[e.CapsuleCollider=136]="CapsuleCollider",e[e.SkinnedMeshRenderer=137]="SkinnedMeshRenderer",e[e.FixedJoint=138]="FixedJoint",e[e.RaycastCollider=140]="RaycastCollider",e[e.BuildSettings=141]="BuildSettings",e[e.AssetBundle=142]="AssetBundle",e[e.CharacterController=143]="CharacterController",e[e.CharacterJoint=144]="CharacterJoint",e[e.SpringJoint=145]="SpringJoint",e[e.WheelCollider=146]="WheelCollider",e[e.ResourceManager=147]="ResourceManager",e[e.NetworkView=148]="NetworkView",e[e.NetworkManager=149]="NetworkManager",e[e.PreloadData=150]="PreloadData",e[e.MovieTexture=152]="MovieTexture",e[e.ConfigurableJoint=153]="ConfigurableJoint",e[e.TerrainCollider=154]="TerrainCollider",e[e.MasterServerInterface=155]="MasterServerInterface",e[e.TerrainData=156]="TerrainData",e[e.LightmapSettings=157]="LightmapSettings",e[e.WebCamTexture=158]="WebCamTexture",e[e.EditorSettings=159]="EditorSettings",e[e.InteractiveCloth=160]="InteractiveCloth",e[e.ClothRenderer=161]="ClothRenderer",e[e.EditorUserSettings=162]="EditorUserSettings",e[e.SkinnedCloth=163]="SkinnedCloth",e[e.AudioReverbFilter=164]="AudioReverbFilter",e[e.AudioHighPassFilter=165]="AudioHighPassFilter",e[e.AudioChorusFilter=166]="AudioChorusFilter",e[e.AudioReverbZone=167]="AudioReverbZone",e[e.AudioEchoFilter=168]="AudioEchoFilter",e[e.AudioLowPassFilter=169]="AudioLowPassFilter",e[e.AudioDistortionFilter=170]="AudioDistortionFilter",e[e.SparseTexture=171]="SparseTexture",e[e.AudioBehaviour=180]="AudioBehaviour",e[e.AudioFilter=181]="AudioFilter",e[e.WindZone=182]="WindZone",e[e.Cloth=183]="Cloth",e[e.SubstanceArchive=184]="SubstanceArchive",e[e.ProceduralMaterial=185]="ProceduralMaterial",e[e.ProceduralTexture=186]="ProceduralTexture",e[e.Texture2DArray=187]="Texture2DArray",e[e.CubemapArray=188]="CubemapArray",e[e.OffMeshLink=191]="OffMeshLink",e[e.OcclusionArea=192]="OcclusionArea",e[e.Tree=193]="Tree",e[e.NavMeshObsolete=194]="NavMeshObsolete",e[e.NavMeshAgent=195]="NavMeshAgent",e[e.NavMeshSettings=196]="NavMeshSettings",e[e.LightProbesLegacy=197]="LightProbesLegacy",e[e.ParticleSystem=198]="ParticleSystem",e[e.ParticleSystemRenderer=199]="ParticleSystemRenderer",e[e.ShaderVariantCollection=200]="ShaderVariantCollection",e[e.LODGroup=205]="LODGroup",e[e.BlendTree=206]="BlendTree",e[e.Motion=207]="Motion",e[e.NavMeshObstacle=208]="NavMeshObstacle",e[e.SortingGroup=210]="SortingGroup",e[e.SpriteRenderer=212]="SpriteRenderer",e[e.Sprite=213]="Sprite",e[e.CachedSpriteAtlas=214]="CachedSpriteAtlas",e[e.ReflectionProbe=215]="ReflectionProbe",e[e.ReflectionProbes=216]="ReflectionProbes",e[e.Terrain=218]="Terrain",e[e.LightProbeGroup=220]="LightProbeGroup",e[e.AnimatorOverrideController=221]="AnimatorOverrideController",e[e.CanvasRenderer=222]="CanvasRenderer",e[e.Canvas=223]="Canvas",e[e.RectTransform=224]="RectTransform",e[e.CanvasGroup=225]="CanvasGroup",e[e.BillboardAsset=226]="BillboardAsset",e[e.BillboardRenderer=227]="BillboardRenderer",e[e.SpeedTreeWindAsset=228]="SpeedTreeWindAsset",e[e.AnchoredJoint2D=229]="AnchoredJoint2D",e[e.Joint2D=230]="Joint2D",e[e.SpringJoint2D=231]="SpringJoint2D",e[e.DistanceJoint2D=232]="DistanceJoint2D",e[e.HingeJoint2D=233]="HingeJoint2D",e[e.SliderJoint2D=234]="SliderJoint2D",e[e.WheelJoint2D=235]="WheelJoint2D",e[e.ClusterInputManager=236]="ClusterInputManager",e[e.BaseVideoTexture=237]="BaseVideoTexture",e[e.NavMeshData=238]="NavMeshData",e[e.AudioMixer=240]="AudioMixer",e[e.AudioMixerController=241]="AudioMixerController",e[e.AudioMixerGroupController=243]="AudioMixerGroupController",e[e.AudioMixerEffectController=244]="AudioMixerEffectController",e[e.AudioMixerSnapshotController=245]="AudioMixerSnapshotController",e[e.PhysicsUpdateBehaviour2D=246]="PhysicsUpdateBehaviour2D",e[e.ConstantForce2D=247]="ConstantForce2D",e[e.Effector2D=248]="Effector2D",e[e.AreaEffector2D=249]="AreaEffector2D",e[e.PointEffector2D=250]="PointEffector2D",e[e.PlatformEffector2D=251]="PlatformEffector2D",e[e.SurfaceEffector2D=252]="SurfaceEffector2D",e[e.BuoyancyEffector2D=253]="BuoyancyEffector2D",e[e.RelativeJoint2D=254]="RelativeJoint2D",e[e.FixedJoint2D=255]="FixedJoint2D",e[e.FrictionJoint2D=256]="FrictionJoint2D",e[e.TargetJoint2D=257]="TargetJoint2D",e[e.LightProbes=258]="LightProbes",e[e.LightProbeProxyVolume=259]="LightProbeProxyVolume",e[e.SampleClip=271]="SampleClip",e[e.AudioMixerSnapshot=272]="AudioMixerSnapshot",e[e.AudioMixerGroup=273]="AudioMixerGroup",e[e.NScreenBridge=280]="NScreenBridge",e[e.AssetBundleManifest=290]="AssetBundleManifest",e[e.UnityAdsManager=292]="UnityAdsManager",e[e.RuntimeInitializeOnLoadManager=300]="RuntimeInitializeOnLoadManager",e[e.CloudWebServicesManager=301]="CloudWebServicesManager",e[e.UnityAnalyticsManager=303]="UnityAnalyticsManager",e[e.CrashReportManager=304]="CrashReportManager",e[e.PerformanceReportingManager=305]="PerformanceReportingManager",e[e.UnityConnectSettings=310]="UnityConnectSettings",e[e.AvatarMask=319]="AvatarMask",e[e.PlayableDirector=320]="PlayableDirector",e[e.VideoPlayer=328]="VideoPlayer",e[e.VideoClip=329]="VideoClip",e[e.ParticleSystemForceField=330]="ParticleSystemForceField",e[e.SpriteMask=331]="SpriteMask",e[e.WorldAnchor=362]="WorldAnchor",e[e.OcclusionCullingData=363]="OcclusionCullingData",e[e.SmallestEditorClassID=1e3]="SmallestEditorClassID",e[e.PrefabInstance=1001]="PrefabInstance",e[e.EditorExtensionImpl=1002]="EditorExtensionImpl",e[e.AssetImporter=1003]="AssetImporter",e[e.AssetDatabaseV1=1004]="AssetDatabaseV1",e[e.Mesh3DSImporter=1005]="Mesh3DSImporter",e[e.TextureImporter=1006]="TextureImporter",e[e.ShaderImporter=1007]="ShaderImporter",e[e.ComputeShaderImporter=1008]="ComputeShaderImporter",e[e.AudioImporter=1020]="AudioImporter",e[e.HierarchyState=1026]="HierarchyState",e[e.GUIDSerializer=1027]="GUIDSerializer",e[e.AssetMetaData=1028]="AssetMetaData",e[e.DefaultAsset=1029]="DefaultAsset",e[e.DefaultImporter=1030]="DefaultImporter",e[e.TextScriptImporter=1031]="TextScriptImporter",e[e.SceneAsset=1032]="SceneAsset",e[e.NativeFormatImporter=1034]="NativeFormatImporter",e[e.MonoImporter=1035]="MonoImporter",e[e.AssetServerCache=1037]="AssetServerCache",e[e.LibraryAssetImporter=1038]="LibraryAssetImporter",e[e.ModelImporter=1040]="ModelImporter",e[e.FBXImporter=1041]="FBXImporter",e[e.TrueTypeFontImporter=1042]="TrueTypeFontImporter",e[e.MovieImporter=1044]="MovieImporter",e[e.EditorBuildSettings=1045]="EditorBuildSettings",e[e.DDSImporter=1046]="DDSImporter",e[e.InspectorExpandedState=1048]="InspectorExpandedState",e[e.AnnotationManager=1049]="AnnotationManager",e[e.PluginImporter=1050]="PluginImporter",e[e.EditorUserBuildSettings=1051]="EditorUserBuildSettings",e[e.PVRImporter=1052]="PVRImporter",e[e.ASTCImporter=1053]="ASTCImporter",e[e.KTXImporter=1054]="KTXImporter",e[e.IHVImageFormatImporter=1055]="IHVImageFormatImporter",e[e.AnimatorStateTransition=1101]="AnimatorStateTransition",e[e.AnimatorState=1102]="AnimatorState",e[e.HumanTemplate=1105]="HumanTemplate",e[e.AnimatorStateMachine=1107]="AnimatorStateMachine",e[e.PreviewAnimationClip=1108]="PreviewAnimationClip",e[e.AnimatorTransition=1109]="AnimatorTransition",e[e.SpeedTreeImporter=1110]="SpeedTreeImporter",e[e.AnimatorTransitionBase=1111]="AnimatorTransitionBase",e[e.SubstanceImporter=1112]="SubstanceImporter",e[e.LightmapParameters=1113]="LightmapParameters",e[e.LightingDataAsset=1120]="LightingDataAsset",e[e.GISRaster=1121]="GISRaster",e[e.GISRasterImporter=1122]="GISRasterImporter",e[e.CadImporter=1123]="CadImporter",e[e.SketchUpImporter=1124]="SketchUpImporter",e[e.BuildReport=1125]="BuildReport",e[e.PackedAssets=1126]="PackedAssets",e[e.VideoClipImporter=1127]="VideoClipImporter",e[e.ActivationLogComponent=2e3]="ActivationLogComponent",e[e.MonoObject=100003]="MonoObject",e[e.Collision=100004]="Collision",e[e.Vector3f=100005]="Vector3f",e[e.RootMotionData=100006]="RootMotionData",e[e.Collision2D=100007]="Collision2D",e[e.AudioMixerLiveUpdateFloat=100008]="AudioMixerLiveUpdateFloat",e[e.AudioMixerLiveUpdateBool=100009]="AudioMixerLiveUpdateBool",e[e.Polygon2D=100010]="Polygon2D",e[e.TilemapCollider2D=19719996]="TilemapCollider2D",e[e.AssetImporterLog=41386430]="AssetImporterLog",e[e.VFXRenderer=73398921]="VFXRenderer",e[e.SerializableManagedRefTestClass=76251197]="SerializableManagedRefTestClass",e[e.Grid=156049354]="Grid",e[e.ScenesUsingAssets=156483287]="ScenesUsingAssets",e[e.ArticulationBody=171741748]="ArticulationBody",e[e.Preset=181963792]="Preset",e[e.EmptyObject=277625683]="EmptyObject",e[e.IConstraint=285090594]="IConstraint",e[e.TestObjectWithSpecialLayoutOne=293259124]="TestObjectWithSpecialLayoutOne",e[e.AssemblyDefinitionReferenceImporter=294290339]="AssemblyDefinitionReferenceImporter",e[e.SiblingDerived=334799969]="SiblingDerived",e[e.TestObjectWithSerializedMapStringNonAlignedStruct=342846651]="TestObjectWithSerializedMapStringNonAlignedStruct",e[e.SubDerived=367388927]="SubDerived",e[e.AssetImportInProgressProxy=369655926]="AssetImportInProgressProxy",e[e.PluginBuildInfo=382020655]="PluginBuildInfo",e[e.EditorProjectAccess=426301858]="EditorProjectAccess",e[e.PrefabImporter=468431735]="PrefabImporter",e[e.TestObjectWithSerializedArray=478637458]="TestObjectWithSerializedArray",e[e.TestObjectWithSerializedAnimationCurve=478637459]="TestObjectWithSerializedAnimationCurve",e[e.TilemapRenderer=483693784]="TilemapRenderer",e[e.ScriptableCamera=488575907]="ScriptableCamera",e[e.SpriteAtlasAsset=612988286]="SpriteAtlasAsset",e[e.SpriteAtlasDatabase=638013454]="SpriteAtlasDatabase",e[e.AudioBuildInfo=641289076]="AudioBuildInfo",e[e.CachedSpriteAtlasRuntimeData=644342135]="CachedSpriteAtlasRuntimeData",e[e.RendererFake=646504946]="RendererFake",e[e.AssemblyDefinitionReferenceAsset=662584278]="AssemblyDefinitionReferenceAsset",e[e.BuiltAssetBundleInfoSet=668709126]="BuiltAssetBundleInfoSet",e[e.SpriteAtlas=687078895]="SpriteAtlas",e[e.RayTracingShaderImporter=747330370]="RayTracingShaderImporter",e[e.RayTracingShader=825902497]="RayTracingShader",e[e.LightingSettings=850595691]="LightingSettings",e[e.PlatformModuleSetup=877146078]="PlatformModuleSetup",e[e.VersionControlSettings=890905787]="VersionControlSettings",e[e.AimConstraint=895512359]="AimConstraint",e[e.VFXManager=937362698]="VFXManager",e[e.VisualEffectSubgraph=994735392]="VisualEffectSubgraph",e[e.VisualEffectSubgraphOperator=994735403]="VisualEffectSubgraphOperator",e[e.VisualEffectSubgraphBlock=994735404]="VisualEffectSubgraphBlock",e[e.LocalizationImporter=1027052791]="LocalizationImporter",e[e.Derived=1091556383]="Derived",e[e.PropertyModificationsTargetTestObject=1111377672]="PropertyModificationsTargetTestObject",e[e.ReferencesArtifactGenerator=1114811875]="ReferencesArtifactGenerator",e[e.AssemblyDefinitionAsset=1152215463]="AssemblyDefinitionAsset",e[e.SceneVisibilityState=1154873562]="SceneVisibilityState",e[e.LookAtConstraint=1183024399]="LookAtConstraint",e[e.SpriteAtlasImporter=1210832254]="SpriteAtlasImporter",e[e.MultiArtifactTestImporter=1223240404]="MultiArtifactTestImporter",e[e.GameObjectRecorder=1268269756]="GameObjectRecorder",e[e.LightingDataAssetParent=1325145578]="LightingDataAssetParent",e[e.PresetManager=1386491679]="PresetManager",e[e.TestObjectWithSpecialLayoutTwo=1392443030]="TestObjectWithSpecialLayoutTwo",e[e.StreamingManager=1403656975]="StreamingManager",e[e.LowerResBlitTexture=1480428607]="LowerResBlitTexture",e[e.StreamingController=1542919678]="StreamingController",e[e.RenderPassAttachment=1571458007]="RenderPassAttachment",e[e.TestObjectVectorPairStringBool=1628831178]="TestObjectVectorPairStringBool",e[e.GridLayout=1742807556]="GridLayout",e[e.AssemblyDefinitionImporter=1766753193]="AssemblyDefinitionImporter",e[e.ParentConstraint=1773428102]="ParentConstraint",e[e.FakeComponent=1803986026]="FakeComponent",e[e.PositionConstraint=1818360608]="PositionConstraint",e[e.RotationConstraint=1818360609]="RotationConstraint",e[e.ScaleConstraint=1818360610]="ScaleConstraint",e[e.Tilemap=1839735485]="Tilemap",e[e.PackageManifest=1896753125]="PackageManifest",e[e.PackageManifestImporter=1896753126]="PackageManifestImporter",e[e.TerrainLayer=1953259897]="TerrainLayer",e[e.SpriteShapeRenderer=1971053207]="SpriteShapeRenderer",e[e.NativeObjectType=1977754360]="NativeObjectType",e[e.TestObjectWithSerializedMapStringBool=1981279845]="TestObjectWithSerializedMapStringBool",e[e.SerializableManagedHost=1995898324]="SerializableManagedHost",e[e.VisualEffectAsset=2058629509]="VisualEffectAsset",e[e.VisualEffectImporter=2058629510]="VisualEffectImporter",e[e.VisualEffectResource=2058629511]="VisualEffectResource",e[e.VisualEffectObject=2059678085]="VisualEffectObject",e[e.VisualEffect=2083052967]="VisualEffect",e[e.LocalizationAsset=2083778819]="LocalizationAsset",e[e.ScriptedImporter=2089858483]="ScriptedImporter",e))(b||{});class D extends s{constructor(e,i,r){super(e.buffer,e.endian),t(this,"assetFile"),t(this,"m_PathID"),t(this,"byteStart"),t(this,"byteSize"),t(this,"type"),t(this,"serializedType"),t(this,"platform"),t(this,"m_Version"),this.assetFile=i,this.m_PathID=r.m_PathID,this.byteStart=r.byteStart,this.byteSize=r.byteSize,void 0===b[r.classID]?this.type=b.UnknownType:this.type=r.classID,this.serializedType=r.serializedType,this.platform=i.m_TargetPlatform,this.m_Version=i.header.m_Version}get version(){return this.assetFile.version}get buildType(){return this.assetFile.buildType}reset(){this.position=this.byteStart}}class E{constructor(e){t(this,"m_FileID"),t(this,"m_PathID"),t(this,"assetFile"),t(this,"index",-2),this.m_FileID=e.readInt32(),this.m_PathID=e.m_Version<g.Unknown_14?BigInt(e.readInt32()):e.readInt64(),this.assetFile=e.assetFile,this.index=-2}getAssetFile(){if(0===this.m_FileID)return this.assetFile;if(this.m_FileID>0&&this.m_FileID-1<this.assetFile.m_Externals.length){const{assetsFileList:e,assetsFileIndexCache:t}=this.assetFile.assetsManager;if(-2===this.index){const i=this.assetFile.m_Externals[this.m_FileID-1].fileName;if(!(i in t)){const r=e.indexOf(e.find((e=>e.fileName.toUpperCase()===i.toUpperCase())));t[i]=r}}if(this.index>=0)return e[this.index]}return null}deref(){const e=this.getAssetFile();if(e&&this.m_PathID.toString()in e.objectsDic)return e.objectsDic[this.m_PathID.toString()]}}class R{constructor(e){t(this,"assetsFile"),t(this,"reader"),t(this,"m_PathID"),t(this,"version"),t(this,"buildType"),t(this,"platform"),t(this,"type"),t(this,"serializedType"),t(this,"byteSize"),this.reader=e,e.reset(),this.assetsFile=e.assetFile,this.type=e.type,this.m_PathID=e.m_PathID,this.version=e.version,this.buildType=e.buildType,this.platform=e.platform,this.serializedType=e.serializedType,this.byteSize=e.byteSize,this.platform===f.NoTarget&&e.readUint32()}}class P extends R{constructor(e){super(e),this.platform===f.NoTarget&&(new E(e),new E(e))}}class w extends P{constructor(e){super(e),t(this,"name"),this.name=e.readAlignedString()}}class F{constructor(e){t(this,"preloadIndex"),t(this,"preloadSize"),t(this,"asset"),this.preloadIndex=e.readInt32(),this.preloadSize=e.readInt32(),this.asset=new E(e)}}class x extends w{constructor(e){super(e),t(this,"preloadTable"),t(this,"container"),this.preloadTable=[];const i=e.readInt32();for(let t=0;t<i;t++)this.preloadTable.push(new E(e));this.container={};const r=e.readInt32();for(let t=0;t<r;t++){const t=e.readAlignedString();this.container[t]=new F(e)}}}class U{constructor(...e){if(t(this,"needSearch"),t(this,"path"),t(this,"assetsFile"),t(this,"offset"),t(this,"size"),t(this,"reader"),3===e.length){const[t,i,r]=e;this.reader=t,this.offset=i,this.size=r}else{if(4!==e.length)throw new Error("invalid arguments");{const[t,i,r,s]=e;this.needSearch=!0,this.path=t,this.assetsFile=i,this.offset=r,this.size=s}}}getReader(){if(this.needSearch){const e=this.path.split("/").pop();if(this.reader=this.assetsFile.assetsManager.resourceFileReaders[e],this.reader)return this.needSearch=!1,this.reader;throw new Error(`Can't find the resource file ${e}`)}return this.reader}getData(e){const t=this.getReader();return t.position=this.offset,e?(t.read(e,0,this.size),e):t.readBytes(this.size)}writeData(e){throw this.getReader().position=this.offset,console.log("writeData",e),new Error("ResourceReader.writeData not implemented")}}class M extends w{constructor(e){super(e);const{version:t}=e;(t[0]>2017||2017===t[0]&&t[1]>=3)&&(e.readInt32(),e.readBoolean(),(t[0]>2020||2020===t[0]&&t[1]>=2)&&e.readBoolean(),e.alignStream())}}class G{constructor(e){t(this,"offset"),t(this,"size"),t(this,"path");const{version:i}=e;i[0]>=2020?this.offset=e.readInt64n():this.offset=e.readUint32(),this.size=e.readUint32(),this.path=e.readAlignedString()}}class L{constructor(e){t(this,"m_FilterMode"),t(this,"m_Aniso"),t(this,"m_MipBias"),t(this,"m_WrapMode"),t(this,"m_WrapV"),t(this,"m_WrapW");const{version:i}=e;this.m_FilterMode=e.readInt32(),this.m_Aniso=e.readInt32(),this.m_MipBias=e.readSingle(),i[0]>=2017?(this.m_WrapMode=e.readInt32(),this.m_WrapV=e.readInt32(),this.m_WrapW=e.readInt32()):this.m_WrapMode=e.readInt32()}}class v extends M{constructor(e){var i;super(e),t(this,"m_Width"),t(this,"m_Height"),t(this,"m_TextureFormat"),t(this,"m_MipMap"),t(this,"m_MipCount"),t(this,"m_TextureSettings"),t(this,"imageData"),t(this,"m_StreamData");const{version:r}=e;this.m_Width=e.readInt32(),this.m_Height=e.readInt32(),e.readInt32(),r[0]>=2020&&e.readInt32(),this.m_TextureFormat=e.readInt32(),r[0]<5||5===r[0]&&r[1]<2?this.m_MipMap=e.readBoolean():this.m_MipCount=e.readInt32(),(r[0]>2||2===r[0]&&r[1]>=6)&&e.readBoolean(),r[0]>=2020&&e.readBoolean(),(r[0]>2019||2019===r[0]&&r[1]>=3)&&e.readBoolean(),r[0]>=3&&(r[0]<5||5===r[0]&&r[1]<=4)&&e.readBoolean(),(r[0]>2018||2018===r[0]&&r[1]>=2)&&e.readBoolean(),e.alignStream(),(r[0]>2018||2018===r[0]&&r[1]>=2)&&e.readInt32(),e.readInt32(),e.readInt32(),this.m_TextureSettings=new L(e),r[0]>=3&&e.readInt32(),(r[0]>3||3===r[0]&&r[1]>=5)&&e.readInt32(),(r[0]>2020||2020===r[0]&&r[1]>=2)&&(e.readUInt8Array(),e.alignStream());const s=e.readInt32();0===s&&(5===r[0]&&r[1]>=3||r[0]>5)&&(this.m_StreamData=new G(e));let a=null;a=null!=(i=this.m_StreamData)&&i.path?new U(this.m_StreamData.path,this.assetsFile,this.m_StreamData.offset,this.m_StreamData.size):new U(e,e.position,s),this.imageData=a}}var k=(e=>(e[e.Alpha8=1]="Alpha8",e[e.ARGB4444=2]="ARGB4444",e[e.RGB24=3]="RGB24",e[e.RGBA32=4]="RGBA32",e[e.ARGB32=5]="ARGB32",e[e.RGB565=7]="RGB565",e[e.R16=9]="R16",e[e.DXT1=10]="DXT1",e[e.DXT5=12]="DXT5",e[e.RGBA4444=13]="RGBA4444",e[e.BGRA32=14]="BGRA32",e[e.RHalf=15]="RHalf",e[e.RGHalf=16]="RGHalf",e[e.RGBAHalf=17]="RGBAHalf",e[e.RFloat=18]="RFloat",e[e.RGFloat=19]="RGFloat",e[e.RGBAFloat=20]="RGBAFloat",e[e.YUY2=21]="YUY2",e[e.RGB9e5Float=22]="RGB9e5Float",e[e.BC4=26]="BC4",e[e.BC5=27]="BC5",e[e.BC6H=24]="BC6H",e[e.BC7=25]="BC7",e[e.DXT1Crunched=28]="DXT1Crunched",e[e.DXT5Crunched=29]="DXT5Crunched",e[e.PVRTC_RGB2=30]="PVRTC_RGB2",e[e.PVRTC_RGBA2=31]="PVRTC_RGBA2",e[e.PVRTC_RGB4=32]="PVRTC_RGB4",e[e.PVRTC_RGBA4=33]="PVRTC_RGBA4",e[e.ETC_RGB4=34]="ETC_RGB4",e[e.ATC_RGB4=35]="ATC_RGB4",e[e.ATC_RGBA8=36]="ATC_RGBA8",e[e.EAC_R=41]="EAC_R",e[e.EAC_R_SIGNED=42]="EAC_R_SIGNED",e[e.EAC_RG=43]="EAC_RG",e[e.EAC_RG_SIGNED=44]="EAC_RG_SIGNED",e[e.ETC2_RGB=45]="ETC2_RGB",e[e.ETC2_RGBA1=46]="ETC2_RGBA1",e[e.ETC2_RGBA8=47]="ETC2_RGBA8",e[e.ASTC_RGB_4x4=48]="ASTC_RGB_4x4",e[e.ASTC_RGB_5x5=49]="ASTC_RGB_5x5",e[e.ASTC_RGB_6x6=50]="ASTC_RGB_6x6",e[e.ASTC_RGB_8x8=51]="ASTC_RGB_8x8",e[e.ASTC_RGB_10x10=52]="ASTC_RGB_10x10",e[e.ASTC_RGB_12x12=53]="ASTC_RGB_12x12",e[e.ASTC_RGBA_4x4=54]="ASTC_RGBA_4x4",e[e.ASTC_RGBA_5x5=55]="ASTC_RGBA_5x5",e[e.ASTC_RGBA_6x6=56]="ASTC_RGBA_6x6",e[e.ASTC_RGBA_8x8=57]="ASTC_RGBA_8x8",e[e.ASTC_RGBA_10x10=58]="ASTC_RGBA_10x10",e[e.ASTC_RGBA_12x12=59]="ASTC_RGBA_12x12",e[e.ETC_RGB4_3DS=60]="ETC_RGB4_3DS",e[e.ETC_RGBA8_3DS=61]="ETC_RGBA8_3DS",e[e.RG16=62]="RG16",e[e.R8=63]="R8",e[e.ETC_RGB4Crunched=64]="ETC_RGB4Crunched",e[e.ETC2_RGBA8Crunched=65]="ETC2_RGBA8Crunched",e[e.ASTC_HDR_4x4=66]="ASTC_HDR_4x4",e[e.ASTC_HDR_5x5=67]="ASTC_HDR_5x5",e[e.ASTC_HDR_6x6=68]="ASTC_HDR_6x6",e[e.ASTC_HDR_8x8=69]="ASTC_HDR_8x8",e[e.ASTC_HDR_10x10=70]="ASTC_HDR_10x10",e[e.ASTC_HDR_12x12=71]="ASTC_HDR_12x12",e[e.RG32=72]="RG32",e[e.RGB48=73]="RGB48",e[e.RGBA64=74]="RGBA64",e))(k||{});class O extends w{constructor(e){super(e),t(this,"m_Script"),this.m_Script=e.readUInt8Array()}}class N extends w{constructor(e){super(e),t(this,"m_Format"),t(this,"m_Type"),t(this,"m_3D"),t(this,"m_UseHardware"),t(this,"m_LoadType"),t(this,"m_Channels"),t(this,"m_Frequency"),t(this,"m_BitsPerSample"),t(this,"m_Length"),t(this,"m_IsTrackerFormat"),t(this,"m_SubsoundIndex"),t(this,"m_PreloadAudioData"),t(this,"m_LoadInBackground"),t(this,"m_Legacy3D"),t(this,"m_CompressionFormat"),t(this,"m_Source"),t(this,"m_Offset"),t(this,"m_Size"),t(this,"m_AudioData");const{version:i}=e;if(i[0]<5)if(this.m_Format=e.readInt32(),this.m_Type=e.readInt32(),this.m_3D=e.readBoolean(),this.m_UseHardware=e.readBoolean(),e.alignStream(),i[0]>=4||3===i[0]&&i[1]>=2){e.readInt32(),this.m_Size=e.readInt32();const t=this.m_Size%4==0?this.m_Size:this.m_Size+4-this.m_Size%4;e.byteSize+e.byteStart-e.position!==t&&(this.m_Offset=e.readUint32(),this.m_Source=`${this.assetsFile.fullName}.resS`)}else this.m_Size=e.readInt32();else this.m_LoadType=e.readInt32(),this.m_Channels=e.readInt32(),this.m_Frequency=e.readInt32(),this.m_BitsPerSample=e.readInt32(),this.m_Length=e.readSingle(),this.m_IsTrackerFormat=e.readBoolean(),e.alignStream(),this.m_SubsoundIndex=e.readInt32(),this.m_PreloadAudioData=e.readBoolean(),this.m_LoadInBackground=e.readBoolean(),this.m_Legacy3D=e.readBoolean(),e.alignStream(),this.m_Source=e.readAlignedString(),this.m_Offset=e.readInt64n(),this.m_Size=e.readInt64n(),this.m_CompressionFormat=e.readInt32();let r=null;r=this.m_Source?new U(this.m_Source,this.assetsFile,this.m_Offset,this.m_Size):new U(e,e.position,this.m_Size),this.m_AudioData=r}}class V{constructor(){t(this,"assetsFileList"),t(this,"assetFileHashes"),t(this,"resourceFileReaders"),t(this,"assetsFileIndexCache"),this.assetsFileList=[],this.assetFileHashes=[],this.resourceFileReaders={},this.assetsFileIndexCache={}}loadFile(e,t=""){const i=e instanceof n?e:new n(t,e);i.fileType===a.BundleFile&&this.loadBundle(i)}loadBundle(e,t=""){const i=new m(e);for(const r of i.fileList){const s=new n(`${e.fullPath}/${r.path}`,r.stream);console.log(s.fullPath,s.fileType),s.fileType===a.AssetsFile?this.loadAssets(s,t||e.fullPath,i.m_Header.unityRevision):this.resourceFileReaders[r.path]=s}}loadAssets(e,t="",i=""){if(!this.assetFileHashes.includes(e.fullPath)){const r=new C(e,this);r.originalPath=t,!i&&r.header.m_Version<g.Unknown_7&&r.setVersion(i),this.assetsFileList.push(r),this.assetFileHashes.push(r.fileName)}}readAssets(){for(const e of this.assetsFileList)for(const t of e.m_Objects){const i=H(new D(e.reader,e,t));e.addObject(i)}}}function H(e){switch(e.type){case b.AssetBundle:return new x(e);case b.TextAsset:return new O(e);case b.Texture2D:return new v(e);case b.AudioClip:return new N(e);default:{const t=b[e.type]||`Unknown${e.type}`;return console.log(`Class UnityEngine.${t} not implemented`),new R(e)}}}const z=e=>(async(e={},t)=>{let i;if(t.startsWith("data:")){const r=t.replace(/^data:.*?base64,/,"");let s;if("function"==typeof Buffer&&"function"==typeof Buffer.from)s=Buffer.from(r,"base64");else{if("function"!=typeof atob)throw new Error("Failed to decode base64-encoded data URL, Buffer and atob are not supported");{const e=atob(r);s=new Uint8Array(e.length);for(let t=0;t<e.length;t++)s[t]=e.charCodeAt(t)}}i=await WebAssembly.instantiate(s,e)}else{const r=await fetch(t),s=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&s.startsWith("application/wasm"))i=await WebAssembly.instantiateStreaming(r,e);else{const t=await r.arrayBuffer();i=await WebAssembly.instantiate(t,e)}}return i.instance})(e,"data:application/wasm;base64,AGFzbQEAAAABHQVgAAF/YAF/AX9gA39/fwF/YAN/f38AYAJ/fwF/AwcGAAECAgQDBQMBAAEHWgUGbWVtb3J5AgAVZ2V0TGluZWFyTWVtb3J5T2Zmc2V0AAATbHo0QmxvY2tFbmNvZGVCb3VuZAABDmx6NEJsb2NrRW5jb2RlAAIObHo0QmxvY2tEZWNvZGUAAwq2CAYEAEEACx0AIABBgICA8AdLBEBBAA8LIAAgAEH/AW5qQRBqC+0DAQh/IAFBgICA8AdLBEBBAA8LIAFBDUkEQEEADwsgACEGIAAgAWoiCUF7aiIHQXlqIQogAiEBAkADQCAAIApPDQEgAC0AAEEIdCAALQABQRB0ciAALQACQRh0ciEDA0ACQCAAIAdLDQMgA0EIdiAALQADQRh0ciIDQbHz3fF5bEEQdkECdCIFKAIAIQQgBSAANgIAIAAgBGsiCEH//wNKDQAgA0H/AXEgBC0AAEcNACADQQh2Qf8BcSAELQABRw0AIANBEHZB/wFxIAQtAAJHDQAgA0EYdiAELQADRw0AIAAgBmshAyAAQQRqIQAgBEEEaiIFIQQCQANAIAAgB08NASAALQAAIAQtAABHDQEgAEEBaiEAIARBAWohBAwACwALIAIgA0EPIANBD0kbQQR0IAQgBWsiBUEPIAVBD0kbcjoAACACQQFqIQIgA0EPTgRAIAIgAxAEIQILIAIgBiADEAUgAiADaiICIAg6AAAgAiAIQQh2OgABIAJBAmohAiAFQQ9OBEAgAiAFEAQhAgsgACEGDAILIABBAWohAAwACwALAAsgAiABRgRAQQAPCyACIAkgBmsiA0EPIANBD0kbQQR0OgAAIAJBAWohAiADQQ9PBEAgAiADEAQhAgsgAiAGIAMQBSACIANqIAFrC+8BAQV/IAFFBEBBAA8LIAAiAyABaiEGIAIhBQJAA0AgAyAGTw0BIAMtAAAhASADQQFqIQMgAUEEdiIEBEAgBEEPRgRAA0AgAy0AACEAIANBAWohAyAAIARqIQQgAEH/AUYNAAsLIAUgAyAEEAUgBSAEaiEFIAQgA2oiAyAGRg0CCyAFIAMtAAAgAy0AAUEIdHJrIgcgBUYNASAHIAZJDQEgA0ECaiEDIAFBD3FBBGoiBEETRgRAA0AgAy0AACEAIANBAWohAyAAIARqIQQgAEH/AUYNAAsLIAUgByAEEAUgBCAFaiEFDAALAAsgBSACawszACABQQ9rIQEDQCAAIAFB/wEgAUH/AUkbOgAAIABBAWohACABQf8BayIBQQBODQALIAAL/AEAAkADQCACQQhJDQEgACABLQAAOgAAIAAgAS0AAToAASAAIAEtAAI6AAIgACABLQADOgADIAAgAS0ABDoABCAAIAEtAAU6AAUgACABLQAGOgAGIAAgAS0ABzoAByAAQQhqIQAgAUEIaiEBIAJBeGohAgwACwALIAJBBE8EQCAAIAEtAAA6AAAgACABLQABOgABIAAgAS0AAjoAAiAAIAEtAAM6AAMgAEEEaiEAIAFBBGohASACQXxqIQILIAJBAk8EQCAAIAEtAAA6AAAgACABLQABOgABIABBAmohACABQQJqIQEgAkF+aiECCyACBEAgACABLQAAOgAACws=");void 0===DataView.prototype.getBigUint64&&(DataView.prototype.getBigUint64=function(e,t){const i=this.getUint32(e,t),r=this.getUint32(e+4,t);return t?r*2**32+i:i*2**32+r}),void 0===DataView.prototype.getBigInt64&&(DataView.prototype.getBigInt64=function(e,t){const i=this.getBigUint64(e,t);return i>2**63-1?i-2**64:i}),void 0===self.createImageBitmap&&(self.createImageBitmap=async function(e,t){return new Promise((i=>{const r=document.createElement("canvas"),s=r.getContext("2d");r.width=e.width,r.height=e.height,s.putImageData(e,0,0),"flipY"===(null==t?void 0:t.imageOrientation)&&(s.setTransform(1,0,0,-1,0,e.height),s.drawImage(r,0,0),s.resetTransform()),i(r)}))});function Q(e){const t=e.imageData.getData();switch(e.m_TextureFormat){case k.RGB24:{const i=new Uint8ClampedArray(e.m_Width*e.m_Height*4);for(let e=0;e<t.length/3;e++)i[4*e]=t[3*e],i[4*e+1]=t[3*e+1],i[4*e+2]=t[3*e+2],i[4*e+3]=255;return new ImageData(i,e.m_Width,e.m_Height)}case k.RGBA32:try{return new ImageData(new Uint8ClampedArray(t),e.m_Width,e.m_Height)}catch(i){console.warn(i,e);const r=new Uint8ClampedArray(e.m_Width*e.m_Height*4||4);return r.set(t.subarray(0,e.m_Width*e.m_Height*4||4)),new ImageData(r,e.m_Width||1,e.m_Height||1)}case k.Alpha8:{const i=new Uint8ClampedArray(e.m_Width*e.m_Height*4);for(let e=0;e<t.length;e++)i[4*e]=0,i[4*e+1]=0,i[4*e+2]=0,i[4*e+3]=t[e];return new ImageData(i,e.m_Width,e.m_Height)}default:return console.warn(`Unsupported texture format ${k[e.m_TextureFormat]}`),new ImageData(new Uint8ClampedArray(e.m_Width*e.m_Height*4),e.m_Width,e.m_Height)}}function W(e,t=new ArrayBuffer(32),i=44100,r=2){const s=e.createBufferSource(),a=function(e,t=new ArrayBuffer(32),i=44100,r=2){const s=new Float32Array(t),a=s.length/r,n=e.createBuffer(r,a,i);for(let e=0;e<r;e++){const t=n.getChannelData(e);for(let i=0;i<a;i++)t[i]=s[i*r+e]}return n}(e,t,i,r);s.buffer=a,s.connect(e.destination),s.start()}function j(e){const t=new Float32Array(e),i=new Int16Array(t.length);for(let e=0;e<t.length;e++){const r=Math.max(-1,Math.min(1,t[e]));i[e]=r<0?32768*r:32767*r}return i.buffer}function J(e=new ArrayBuffer(16),t=44100,i=16,r=1){const s=e.byteLength,a=new DataView(new ArrayBuffer(s+44));return a.setUint32(0,1380533830,!1),a.setUint32(4,s+36,!0),a.setUint32(8,1463899717,!1),a.setUint32(12,1718449184,!1),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,r,!0),a.setUint32(24,t,!0),a.setUint32(28,t*r*i/8,!0),a.setUint16(32,r*i/8,!0),a.setUint16(34,i,!0),a.setUint32(36,1684108385,!1),a.setUint32(40,s,!0),new Uint8Array(a.buffer,44).set(new Uint8Array(e)),a.buffer}self.AudioContext||(self.AudioContext=self.webkitAudioContext);const X=document.createElement("p");X.style.color="red",X.style.whiteSpace="pre-wrap",document.body.append(X);const Z=(e,t)=>{const i=(e=>null===e?"Null":void 0===e?"Undefined":e.constructor.name)(e);let r=String(e),s=String(e);if(e instanceof Error){const t=e.stack||"Stack not available";r=e.name===i?e.message:`${e.name}: ${e.message}`;const a=t.indexOf(r)+1;s=a?`${r}\n${t.slice(a+r.length)}`:`${r}\n    ${t.split("\n").join("\n    ")}`}t&&(r=t),r.split("\n")[0];const a=`[${i}] ${s}`;X.innerHTML+=`${a.replace(/&/g,"&amp;").replace(/</g,"&lt;")}\n`};self.addEventListener("error",(e=>Z(e.error,e.message))),self.addEventListener("unhandledrejection",(e=>Z(e.reason))),self._i=["Unity资源提取器","0.1.0".split("."),1686388918,1687521751];const $=document.querySelector(".main");$.appendChild(X);const q=new class{constructor(){t(this,"ready"),t(this,"callback"),this.ready=async function(){await z().then((e=>{self.lz4api=e.exports})),console.log("Hello, world!")}(),this.callback=()=>{}}async readFile(e){const t=new V;console.log(t);const i=new FileReader;i.readAsArrayBuffer(e),await new Promise((r=>{i.onload=()=>{t.loadFile(new Uint8Array(i.result),e.name),r()}})),t.readAssets();for(const e of t.assetsFileList)for(const t of e.objects)if(t instanceof O)this.callback("TextAsset",(new TextDecoder).decode(t.m_Script));else if(t instanceof v){const e=Q(t),i=await createImageBitmap(e,{imageOrientation:"flipY"});this.callback("Texture2D",i)}else if(t instanceof N){const e=document.createElement("div"),i=document.createTextNode("");e.appendChild(i);const r=t.m_AudioData.getData();new Promise((e=>{const t=new Worker("./fmod.worker.js");t.postMessage(r,[r.buffer]),t.onmessage=({data:t})=>{null!=t.progress?i.textContent=`Progress: ${Number(100*t.progress).toFixed(2)}%`:null!=t.pcm&&e(t.pcm)}})).then((t=>{const i=document.createElement("button");i.textContent="Play";i.addEventListener("click",(()=>{W(new AudioContext,t.buffer,t.frequency,t.channels)})),e.appendChild(i);const r=document.createElement("button");r.textContent="Download";r.addEventListener("click",(()=>{console.log(t);const e=J(j(t.buffer),t.frequency,16,t.channels),i=new Blob([e],{type:"audio/wav"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="sound.wav",s.click(),URL.revokeObjectURL(r)})),e.appendChild(r)})),this.callback("AudioClip",e)}else this.callback("Unknown",t)}};q.callback=(e,t)=>{if(console.log(e,t),"TextAsset"===e){const e=document.createElement("textarea");e.value=t,$.appendChild(e),e.style.cssText+=";width:80%;max-width:854px;min-height:100px;display:block;margin:0 auto",e.readOnly=!0}if("Texture2D"===e){const e=t,i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0),$.appendChild(i),i.style.cssText+=";width:80%;max-width:854px;min-height:100px;display:block;margin:0 auto;image-rendering:pixelated"}if("AudioClip"===e){const e=t;$.appendChild(e)}},q.ready.then((()=>{const e=document.createElement("input");e.id=Utils.randomUUID(),e.type="file",e.multiple=!0,e.addEventListener("change",(()=>{for(const t of e.files)q.readFile(t)}));const t=document.createElement("label");t.htmlFor=e.id,t.textContent="Select files",$.appendChild(e),$.appendChild(t);const i=async e=>{const t=await fetch(e).then((async e=>e.arrayBuffer()));q.readFile(new File([new Uint8Array(t)],e))},r=document.createElement("button");r.textContent="Preset1",r.addEventListener("click",(()=>{i("d5fc9081b5932e732c44963e81ffbbaf.bundle")})),r.onclick=()=>{r.disabled=!0,r.classList.add("disabled")},$.appendChild(r);const s=document.createElement("button");s.textContent="Preset2",s.addEventListener("click",(()=>{i("145804cf1860fde33237f838df1ad620.bundle")})),s.onclick=()=>{s.disabled=!0,s.classList.add("disabled")},$.appendChild(s);const a=document.createElement("button");a.textContent="Preset3",a.addEventListener("click",(()=>{i("f0fb24ef80f2740b021fae4943938d5c.bundle")})),a.onclick=()=>{a.disabled=!0,a.classList.add("disabled")},$.appendChild(a)}));
//# sourceMappingURL=script-0.1.0.js.map
